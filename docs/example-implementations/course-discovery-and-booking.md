## Course discovery and booking workflow #1

### Overview

This document outlines the workflow for course discovery and booking using DSEP. The workflow includes interactions between the app (BAP) and the course provider (BPP) for search, select, booking, and completing the courses.

A typical workflow for course discovery consists of the following steps:

#### Step 1: The BAP searches for courses

The BAP provides inputs to find the relevant courses on the providers. The search can be based on the course name, provider or category, or a combination of all three.
Additionally the BAP can fire a search for a specific course item, to get more information of that course.

#### Step 2: Provider sends catalogs of all the matching courses

The provider platform (BPP) sends the catalogs of matching courses to the BAP.
The catalog will consist of various courses they provide along with their respective attributes such as the course provider, course instructor, course preview.

Additionally when the BPP gets a search request for a specific item, the BPP can respond with the catalog of that iteam with additional information of eligiblity criteria and the pre-requisites for the course.

#### Step 3: The BAP selects a course

The BAP selects the course(s) (items) from the provider that they are interested in.

#### Step 4: Provider sends quoted price

The provider will receive the order based on the BAP's requirements. The provider sends additional information of the course to the BAP, this could be eligiblity criteria and the pre-requisites for the course.
The user gets the quoted price, including the breakdown of the price details. The interim quote can include offers on courses provided by the provider.

#### Step 5: The BAP initiates the course order

The BAP initializes the order by providing billing details, apart from the details of the items chosen.
Here, the BAP will provide their `Name`, `Email ID` and `Phone Number` in the billing and customer information.

#### Step 6: Provider sends draft course order

The course provider sends the draft order with the payment and fulfilment terms to the user-side. The BPP sends the payment link, the BAP uses the link to complete the payment.

#### Step 7: The BAP confirms the course order

The BAP sees the draft order and confirms it by agreeing to the payment and fulfilment terms and conditions
The confirm status will sent to the provider saying that user has paid the price and agreed to the details on the course.

The provider might add chapters of the course as additional items to the order, with this all the chapters will be available to the user.

#### Step 8: User checks the status of the order

The BAP requests to check the updates/status of their course

#### Step 9: Provider sends the status of the course

The provider will send the order updates with current status to the BAP, this can include the percentage of course or chapter in progress.

#### Step 10: The provider updates the order.

The provider will send a certificate or a badge when the course has been completed by the user.

### Search (Searching for courses)

1. The user declares the intent for english courses
2. Providers publish the catalog of their courses

### User-side Actions

A course user can declare their intent for enrolling into a course in many ways like:

- Searching for courses based on course name
- Searching for courses based on course provider
- Searching for courses based on course category

### Provider-side Actions

In this interaction, the Provider publishes their catalog of services and products. A Provider can publish various courses segregated on categories of courses and their fulfillments

### Logical Workflow

```mermaid
    sequenceDiagram
    User->>Provider: Declare Intent to search courses
    Provider->>User: Publish Catalog of courses
```

### Beckn Protocol API Workflow

In beckn protocol, the search intent generated by the BAP is typically published on the gateway (BG) that broadcasts the intent to multiple Provider platforms (BPPs). Each of the BPPs return their catalogs directly to the BAP via asynchronous callbacks. The workflow for that is shown below.

```mermaid
  sequenceDiagram
    User Platform (BAP)->> Gateway (BG): Declare intent to search for courses ( search )
    Gateway (BG)->> Registry: Lookup Provider Platforms (lookup)
    Registry ->> Gateway (BG): List of Provider Platforms that deal with providing courses (200 OK)
    Gateway (BG)->> Provider Platform 1 (BPP1): Declare Intent to provide courses (search)
    Gateway (BG)->> Provider Platform 2 (BPP2): Declare Intent to provide courses (search)
    Gateway (BG)->> Provider Platform n (BPPn): Declare Intent to provide courses (search)
    Provider Platform 1 (BPP1)->> User Platform (BAP): Publish Catalog of Provider 1 (on_search)
    Provider Platform 2 (BPP2)->> User Platform (BAP): Publish Catalog of Provider 2 (on_search)
    Provider Platform n (BPPn)->> User Platform (BAP): Publish Catalog of Provider n (on_search)
```
